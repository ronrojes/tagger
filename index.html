<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Catholic Tag Master v4.0</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #f0f4f8; color: #2d3436; }
        .container { max-width: 850px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; border-bottom: 3px solid #f1c40f; padding-bottom: 10px; margin-top: 0; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px; }
        label { font-weight: bold; font-size: 0.85em; display: block; margin-bottom: 5px; color: #636e72; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #dfe6e9; border-radius: 6px; box-sizing: border-box; font-size: 14px; transition: 0.2s; }
        input:focus, textarea:focus { border-color: #0984e3; outline: none; background: #fff; }
        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        button { flex: 1; padding: 14px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: 0.2s; font-size: 14px; }
        #btnGen { background: #0984e3; color: white; }
        #btnCopy { background: #00b894; color: white; }
        #btnClear { background: #d63031; color: white; max-width: 130px; }
        button:hover { opacity: 0.8; transform: translateY(-1px); }
        .stats { font-size: 0.8em; font-weight: bold; color: #0984e3; margin-bottom: 5px; text-align: right; }
        #result { background: #fdf2f2; color: #d63031; font-family: 'Courier New', monospace; border: 2px dashed #fab1a0; font-weight: bold; }
        .topic-box { background: #f9f9f9; padding: 15px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Catholic Media Tag Master v4.0</h2>

    <div class="form-row">
        <div><label>Program Name</label><input type="text" id="program" placeholder="e.g. Life of Prayer"></div>
        <div><label>Episode Title</label><input type="text" id="episode" placeholder="e.g. Learning to Meditate"></div>
    </div>

    <div class="topic-box">
        <label>Additional Topics / Subjects (Comma separated)</label>
        <input type="text" id="extraTopics" placeholder="e.g. Testimony, Eucharist, Forgiveness, Lent">
        <div style="font-size: 0.75em; color: #999;">Type general topics here (e.g. confession, rosary, testimony).</div>
    </div>

    <div class="form-row">
        <div>
            <label>Religious Title</label>
            <select id="mainTitle">
                <option value="none">Layperson (No Title)</option>
                <option value="priest">Priest (Father / Fr)</option>
                <option value="nun">Nun (Sister / Sr)</option>
                <option value="mother">Mother Superior (Mother / Mo)</option>
                <option value="deacon">Deacon (Dcn / Deacon)</option>
                <option value="msgr">Monsignor (Msgr)</option>
                <option value="pastor">Pastor</option>
                <option value="bishop">Bishop (Bp / Bishop)</option>
                <option value="saint">Saint (St)</option>
            </select>
        </div>
        <div>
            <label>Academic / Professional</label>
            <select id="extraTitle">
                <option value="none">None</option>
                <option value="dr">Doctor (Dr)</option>
                <option value="churchdoc">Doctor of the Church</option>
            </select>
        </div>
    </div>

    <label>Names (One per line for Bulk Mode)</label>
    <textarea id="bulkNames" rows="3" placeholder="Enter Full Name(s)"></textarea>

    <label>Religious Order (Applies to all names above)</label>
    <input type="text" id="order" placeholder="e.g. SJ, OP, CMI">

    <div class="btn-group">
        <button id="btnClear">RESET ALL</button>
        <button id="btnGen">GENERATE TAGS</button>
        <button id="btnCopy">COPY CLIPBOARD</button>
    </div>

    <hr style="margin: 25px 0; border: 0; border-top: 1px solid #eee;">
    <div class="stats" id="tagCount">Tags: 0</div>
    <textarea id="result" rows="8" readonly placeholder="Final tags appear here..."></textarea>
</div>

<script>
    window.onload = function() {
        const btnGen = document.getElementById('btnGen');
        const btnClear = document.getElementById('btnClear');
        const btnCopy = document.getElementById('btnCopy');

        function slugify(text) {
            return text.trim().toLowerCase()
                .replace(/\s+/g, '-')
                .replace(/[^\w\-]+/g, '')
                .replace(/\-\-+/g, '-');
        }

        btnGen.addEventListener('click', function() {
            const program = document.getElementById('program').value;
            const episode = document.getElementById('episode').value;
            const topics = document.getElementById('extraTopics').value.split(',');
            const namesRaw = document.getElementById('bulkNames').value.split('\n');
            const mainTitle = document.getElementById('mainTitle').value;
            const extraTitle = document.getElementById('extraTitle').value;
            const globalOrder = document.getElementById('order').value.trim().toUpperCase();

            let finalTags = [];

            // 1. Program, Episode, and General Topics
            if (program) finalTags.push(slugify(program));
            if (episode) finalTags.push(slugify(episode));
            topics.forEach(t => {
                if(t.trim()) finalTags.push(slugify(t));
            });

            // 2. Names Processing
            namesRaw.forEach(nameLine => {
                let name = nameLine.trim();
                if (!name) return;
                let nameSlug = slugify(name);
                let last = name.split(" ").pop();

                let titles = [];
                if (mainTitle === 'priest') titles = ['Father', 'Fr'];
                else if (mainTitle === 'nun') titles = ['Sister', 'Sr'];
                else if (mainTitle === 'mother') titles = ['Mother', 'Mo'];
                else if (mainTitle === 'deacon') titles = ['Deacon', 'Dcn'];
                else if (mainTitle === 'msgr') titles = ['Monsignor', 'Msgr'];
                else if (mainTitle === 'pastor') titles = ['Pastor'];
                else if (mainTitle === 'bishop') titles = ['Bishop', 'Bp'];
                else if (mainTitle === 'saint') titles = ['Saint', 'St'];

                let extras = [];
                if (extraTitle === 'dr') extras = ['Dr', 'Doctor'];
                else if (extraTitle === 'churchdoc') extras = ['Doctor-of-the-Church'];

                // Base tags
                finalTags.push(nameSlug);
                if (globalOrder) finalTags.push(`${nameSlug}-${globalOrder}`);

                // Title + Name combinations
                titles.forEach(t => {
                    finalTags.push(`${t}-${nameSlug}`);
                    finalTags.push(`${t}-${slugify(last)}`);
                    if (globalOrder) finalTags.push(`${t}-${nameSlug}-${globalOrder}`);
                    
                    extras.forEach(ex => {
                        finalTags.push(`${ex}-${t}-${nameSlug}`);
                        finalTags.push(`${ex}-${nameSlug}`);
                    });
                });

                // Laypeople / No Religious Title but has Academic Title
                if (mainTitle === 'none' && extras.length > 0) {
                    extras.forEach(ex => {
                        finalTags.push(`${ex}-${nameSlug}`);
                        finalTags.push(`${ex}-${slugify(last)}`);
                    });
                }
            });

            let uniqueTags = [...new Set(finalTags)];
            document.getElementById('result').value = uniqueTags.join(', ');
            document.getElementById('tagCount').innerText = 'Tags Generated: ' + uniqueTags.length;
        });

        btnClear.addEventListener('click', function() {
            if(confirm("Clear all data for next video?")) {
                location.reload();
            }
        });

        btnCopy.addEventListener('click', function() {
            let res = document.getElementById("result");
            if(!res.value) return;
            res.select();
            document.execCommand("copy");
            alert("Tags copied to clipboard!");
        });
    };
</script>
</body>
</html>
